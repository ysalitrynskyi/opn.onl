# ===========================================
# DOCKER COMPOSE ENVIRONMENT VARIABLES
# opn.onl - URL Shortener
# ===========================================
# Copy this file to .env and fill in your production values

# ===========================================
# DATABASE (PostgreSQL)
# ===========================================
POSTGRES_USER=postgres
POSTGRES_PASSWORD=your-secure-postgres-password
POSTGRES_DB=opn_onl

# ===========================================
# SECURITY
# ===========================================
# Generate with: openssl rand -base64 64
JWT_SECRET=your-super-secret-jwt-key-minimum-32-characters-long

# Account deletion (disabled by default)
ENABLE_ACCOUNT_DELETION=false

# ===========================================
# URLS (Update with your domain)
# ===========================================
# Backend API URL (used by frontend)
BASE_URL=https://api.opn.onl
FRONTEND_URL=https://opn.onl

# Frontend build-time variables
VITE_API_URL=https://api.opn.onl
VITE_FRONTEND_URL=https://opn.onl

# Force HTTPS redirect (recommended: true in production)
FORCE_HTTPS=true

# ===========================================
# CLOUDFLARE TUNNEL
# ===========================================
# Get from Cloudflare Zero Trust dashboard:
# 1. Go to Zero Trust > Access > Tunnels
# 2. Create a tunnel
# 3. Copy the token
CLOUDFLARE_TUNNEL_TOKEN=your-cloudflare-tunnel-token

# ===========================================
# REDIS CACHE
# ===========================================
REDIS_CACHE_TTL=300

# ===========================================
# LOGGING
# ===========================================
RUST_LOG=info,tower_http=info

# ===========================================
# EMAIL (SMTP) - Optional but recommended
# ===========================================
# Required for: email verification, password reset, contact form
SMTP_HOST=smtp.example.com
SMTP_PORT=587
SMTP_USER=your-smtp-username
SMTP_PASS=your-smtp-password
SMTP_FROM_EMAIL=noreply@opn.onl
SMTP_FROM_NAME=opn.onl
ADMIN_EMAIL=admin@opn.onl

# ===========================================
# S3 BACKUP (Cloudflare R2) - Optional
# ===========================================
# Required for: automated database backups
BACKUP_S3_ENDPOINT=https://your-account-id.r2.cloudflarestorage.com
BACKUP_S3_BUCKET=opn-backups
BACKUP_S3_ACCESS_KEY=your-r2-access-key
BACKUP_S3_SECRET_KEY=your-r2-secret-key
BACKUP_S3_REGION=auto

# ===========================================
# PERFORMANCE TUNING
# ===========================================
# Click event batching (reduce DB writes)
CLICK_BUFFER_SIZE=100
CLICK_FLUSH_INTERVAL=10

# ===========================================
# GEOIP (MaxMind) - Optional
# ===========================================
# For location analytics (country/city detection)
# Sign up for free: https://www.maxmind.com/en/geolite2/signup
# MAXMIND_ACCOUNT_ID=123456
# MAXMIND_LICENSE_KEY=your-license-key

# ===========================================
# DOCKER IMAGES (for Portainer deployment)
# ===========================================
# If using pre-built images instead of building in Portainer:
# BACKEND_IMAGE=ghcr.io/your-username/opn-backend:latest
# FRONTEND_IMAGE=ghcr.io/your-username/opn-frontend:latest
