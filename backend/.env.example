# ===========================================
# BACKEND CONFIGURATION - opn.onl
# ===========================================
# Copy this file to .env and fill in your values

# Database (Required)
DATABASE_URL=postgres://postgres:postgres@localhost:5432/opn_onl

# JWT Secret (Required) - Generate with: openssl rand -base64 32
JWT_SECRET=your-super-secret-jwt-key-change-in-production

# Server Configuration
HOST=0.0.0.0
PORT=3000
BASE_URL=http://localhost:3000
FRONTEND_URL=http://localhost:5173

# HTTPS Redirect (set to "true" in production behind reverse proxy)
FORCE_HTTPS=false

# Logging
RUST_LOG=info,tower_http=debug
LOG_DIR=logs

# ===========================================
# LINK MANAGEMENT
# ===========================================

# Allow custom aliases (default: true)
ENABLE_CUSTOM_ALIASES=true

# Allow reusing slugs from deleted links (default: false)
ALLOW_DELETED_SLUG_REUSE=false

# Alias length constraints
MIN_ALIAS_LENGTH=5
MAX_ALIAS_LENGTH=25

# URL sanitization (default: true)
ENABLE_URL_SANITIZATION=true

# Account deletion (default: false)
ENABLE_ACCOUNT_DELETION=false

# ===========================================
# OPTIONAL SERVICES
# ===========================================

# Redis Cache (Optional - improves redirect performance)
# REDIS_URL=redis://localhost:6379
# REDIS_CACHE_TTL=300

# Email Service (Optional - required for email verification & contact form)
# SMTP_HOST=smtp.example.com
# SMTP_PORT=587
# SMTP_USER=your-smtp-username
# SMTP_PASS=your-smtp-password
# SMTP_TLS=starttls  # starttls, tls, or none
# SMTP_FROM_EMAIL=noreply@opn.onl
# SMTP_FROM_NAME=opn.onl

# Admin Email (for contact form notifications)
# ADMIN_EMAIL=admin@opn.onl

# S3 Backup (Optional - for automated database backups)
# BACKUP_S3_ENDPOINT=https://your-account-id.r2.cloudflarestorage.com
# BACKUP_S3_BUCKET=opn-backups
# BACKUP_S3_ACCESS_KEY=your-access-key
# BACKUP_S3_SECRET_KEY=your-secret-key
# BACKUP_S3_REGION=auto

# Click Event Batching (Optional - tune for performance)
# CLICK_BUFFER_SIZE=100
# CLICK_FLUSH_INTERVAL=10

# ===========================================
# GeoIP Database (Optional - for location analytics)
# ===========================================
# Sign up at https://www.maxmind.com/en/geolite2/signup
# MAXMIND_ACCOUNT_ID=123456
# MAXMIND_LICENSE_KEY=your-license-key

# ===========================================
# RATE LIMITING
# ===========================================

# Global email rate limit (prevents abuse/DDoS, controls costs)
# Maximum emails that can be sent per hour (default: 500)
EMAIL_RATE_LIMIT_PER_HOUR=500
